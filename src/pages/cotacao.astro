---
import MainLayoult from "../layouts/MainLayoult.astro";
import Header from "../components/layout/Header/Header.astro";
import Footer from "../components/layout/Footer/Footer.astro";
import QuoteFormSection from "../components/sections/ServicesDetail/QuoteFormSection.astro";
import { servicosDetalhes } from "../data/servicos-detalhes";

const url = Astro.url;
const serviceParam = url.searchParams.get("servico");
const emailParam = url.searchParams.get("email");

// Mapear slugs de servi√ßo para nomes de tipo
const serviceMap: Record<string, string> = {
  "ftl": "Carga Completa (FTL)",
  "ltl": "Carga Fracionada (LTL)",
  "armazenagem": "Armazenagem",
  "expresso": "Frete Expresso",
};

const preselectedService = serviceParam ? serviceMap[serviceParam] : undefined;
const prefilledEmail = emailParam || undefined;
---

<MainLayoult>
  <Header />
  <main>
    <QuoteFormSection
      tagline={servicosDetalhes.quote.tagline}
      title={servicosDetalhes.quote.title}
      description={servicosDetalhes.quote.description}
      serviceTypes={servicosDetalhes.quote.serviceTypes}
      preselectedService={preselectedService}
      prefilledEmail={prefilledEmail}
    />
  </main>
  <Footer />
</MainLayoult>

<style>
  main {
    padding-top: 5rem;
    min-height: 100vh;
    background-color: var(--background-dark);
  }
</style>
