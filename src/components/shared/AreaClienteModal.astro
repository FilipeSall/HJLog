---
import { Image } from "astro:assets";
import demoAreaLogada from "../../images/demo-area-logada.jpg";
---

<div id="area-cliente-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">
  <div class="modal-container">
    <button class="modal-close" aria-label="Fechar modal" id="close-modal">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
      </svg>
    </button>

    <div class="modal-content">
      <!-- Header do Modal -->
      <div class="modal-header">
        <div class="modal-badge-group">
          <span class="modal-badge">ÁREA NÃO IMPLEMENTADA</span>
          <span class="modal-badge-subtitle">Aguardando aprovação</span>
        </div>
        <h2 id="modal-title" class="modal-title">Área do Cliente</h2>
        <p class="modal-subtitle">Portal exclusivo para clientes da HJLOG gerenciarem suas cargas e solicitações</p>
      </div>

      <!-- Preview da Interface -->
      <div class="modal-preview">
        <Image
          src={demoAreaLogada}
          alt="Preview da Área do Cliente - Painel de gerenciamento de cargas"
          class="preview-image"
          loading="lazy"
        />
        <div class="preview-overlay">
          <span class="preview-label">PREVIEW DO PAINEL</span>
        </div>
      </div>

      <!-- Features -->
      <div class="modal-features">
        <h3 class="features-title">Possíveis benefícios desta plataforma</h3>
        <p class="features-subtitle">Exemplos de funcionalidades que podem ser implementadas</p>

        <div class="features-grid">
          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M9 10v5h2V4h2v11h2V4h2V2H9C6.79 2 5 3.79 5 6v5.5c0 1.93 1.57 3.5 3.5 3.5H9zm12 1h-5l.23 2h2.77v5c0 1.11-.89 2-2 2H7c-1.11 0-2-.89-2-2v-3h9V9H5V6h16v5z"/>
              </svg>
            </div>
            <div>
              <h4 class="feature-title">Rastreamento em Tempo Real</h4>
              <p class="feature-description">Acompanhamento de cargas 24/7</p>
            </div>
          </div>

          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
              </svg>
            </div>
            <div>
              <h4 class="feature-title">Histórico Completo</h4>
              <p class="feature-description">Acesso ao histórico completo de pedidos</p>
            </div>
          </div>

          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
            </div>
            <div>
              <h4 class="feature-title">Gestão de Faturas</h4>
              <p class="feature-description">Visualização e download de documentos</p>
            </div>
          </div>

          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
              </svg>
            </div>
            <div>
              <h4 class="feature-title">Exportação de Dados</h4>
              <p class="feature-description">Download de relatórios em PDF ou Excel</p>
            </div>
          </div>

          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"/>
              </svg>
            </div>
            <div>
              <h4 class="feature-title">Programa de Fidelidade</h4>
              <p class="feature-description">Descontos e benefícios para clientes recorrentes</p>
            </div>
          </div>

          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
              </svg>
            </div>
            <div>
              <h4 class="feature-title">Solicitar Cotações</h4>
              <p class="feature-description">Sistema rápido de solicitação de orçamentos</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Nota Técnica -->
      <div class="modal-note">
        <p class="note-text">
          <strong>Nota técnica:</strong> A implementação desta plataforma utilizaria Firebase como backend para autenticação,
          armazenamento de dados e gerenciamento em tempo real. Caso não seja implementado agora, este botão será
          substituído por um acesso rápido às redes sociais da HJLOG.
        </p>
      </div>
    </div>
  </div>
</div>

<style>
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(4px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 100;
    padding: 1rem;
    overflow-y: auto;
  }

  .modal-overlay.active {
    display: flex;
  }

  .modal-container {
    background-color: var(--background-dark);
    border: 1px solid var(--border-dark);
    border-radius: var(--radius-sm);
    max-width: 56rem;
    width: 100%;
    position: relative;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
  }

  .modal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary-dark);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    z-index: 10;
    border: none;
    cursor: pointer;
  }

  .modal-close:hover {
    background-color: var(--primary);
    color: var(--background-dark);
    transform: rotate(90deg);
  }

  .modal-content {
    padding: 2rem;
  }

  @media (min-width: 768px) {
    .modal-content {
      padding: 3rem;
    }
  }

  /* Header */
  .modal-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .modal-badge-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }

  .modal-badge {
    display: inline-block;
    background-color: rgba(255, 165, 0, 0.9);
    color: var(--background-dark);
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    padding: 0.5rem 1rem;
    border-radius: 9999px;
    animation: pulse-badge 2s ease-in-out infinite;
  }

  @keyframes pulse-badge {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.7;
      transform: scale(1.05);
    }
  }

  .modal-badge-subtitle {
    font-size: var(--text-xs);
    color: var(--text-secondary-dark);
    font-style: italic;
    opacity: 0.8;
  }

  .modal-title {
    font-size: var(--text-4xl);
    font-weight: var(--font-bold);
    color: var(--text-primary-dark);
    text-transform: uppercase;
    margin-bottom: 0.5rem;
  }

  .modal-subtitle {
    font-size: var(--text-lg);
    color: var(--text-secondary-dark);
  }

  /* Preview */
  .modal-preview {
    position: relative;
    margin-bottom: 3rem;
    border-radius: var(--radius-sm);
    overflow: visible;
    border: 1px solid var(--border-dark);
    max-width: 550px;
    margin-left: auto;
    margin-right: auto;
    box-shadow:
      0 10px 40px rgba(0, 0, 0, 0.3),
      0 0 0 1px rgba(255, 107, 0, 0.1);
  }

  .modal-preview > :global(img),
  .preview-image {
    border-radius: var(--radius-sm);
    overflow: hidden;
  }

  .preview-placeholder {
    width: 100%;
    min-height: 400px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    background: linear-gradient(135deg, rgba(255, 107, 0, 0.05) 0%, rgba(255, 107, 0, 0.02) 100%);
    color: var(--text-secondary-dark);
    padding: 3rem;
    text-align: center;
  }

  .preview-placeholder svg {
    opacity: 0.3;
  }

  .preview-placeholder p {
    font-size: var(--text-lg);
    color: var(--text-secondary-dark);
  }

  .placeholder-note {
    font-size: var(--text-xs);
    color: var(--text-secondary-dark);
    opacity: 0.5;
    font-style: italic;
  }

  .preview-image {
    width: 100%;
    height: auto;
    display: block;
    filter: brightness(0.95) contrast(1.05) saturate(1.1);
    transition: filter 0.3s ease;
  }

  .modal-preview:hover .preview-image {
    filter: brightness(1) contrast(1.08) saturate(1.15);
  }

  .preview-overlay {
    position: absolute;
    top: -0.5rem;
    left: 50%;
    transform: translateX(-50%);
    pointer-events: none;
    z-index: 10;
  }

  .preview-label {
    background-color: rgba(0, 0, 0, 0.85);
    color: var(--primary);
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    padding: 0.5rem 1rem;
    border-radius: var(--radius-sm);
    border: 2px solid var(--primary);
    box-shadow: 0 4px 20px rgba(255, 107, 0, 0.3);
    backdrop-filter: blur(4px);
    white-space: nowrap;
  }

  @media (min-width: 640px) {
    .preview-label {
      font-size: var(--text-sm);
      padding: 1rem 2rem;
    }
  }

  /* Features */
  .modal-features {
    margin-bottom: 2rem;
  }

  .features-title {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--text-primary-dark);
    text-transform: uppercase;
    margin-bottom: 0.5rem;
    text-align: center;
  }

  .features-subtitle {
    font-size: var(--text-sm);
    color: var(--text-secondary-dark);
    text-align: center;
    margin-bottom: 2rem;
    font-style: italic;
    opacity: 0.8;
  }

  .features-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  @media (min-width: 768px) {
    .features-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .feature-item {
    display: flex;
    gap: 1rem;
    padding: 1.5rem;
    background-color: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-dark);
    border-radius: var(--radius-sm);
    transition: all 0.3s;
  }

  .feature-item:hover {
    background-color: rgba(255, 255, 255, 0.05);
    border-color: var(--primary);
    transform: translateY(-2px);
  }

  .feature-icon {
    flex-shrink: 0;
    width: 3rem;
    height: 3rem;
    background-color: var(--primary);
    color: var(--background-dark);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .feature-title {
    font-size: var(--text-base);
    font-weight: var(--font-bold);
    color: var(--text-primary-dark);
    margin-bottom: 0.25rem;
  }

  .feature-description {
    font-size: var(--text-sm);
    color: var(--text-secondary-dark);
  }

  /* Nota Técnica */
  .modal-note {
    margin-top: 2rem;
    padding: 1.5rem;
    background-color: rgba(255, 107, 0, 0.05);
    border-left: 4px solid var(--primary);
    border-radius: var(--radius-sm);
  }

  .note-text {
    font-size: var(--text-sm);
    color: var(--text-secondary-dark);
    line-height: 1.6;
  }

  .note-text strong {
    color: var(--primary);
    font-weight: var(--font-bold);
  }
</style>

<script>
  // Não executar no servidor
  if (typeof window !== 'undefined') {
    const modal = document.getElementById('area-cliente-modal');
    const closeBtn = document.getElementById('close-modal');

    // Fechar modal
    const closeModal = () => {
      modal?.classList.remove('active');
      document.body.style.overflow = '';
    };

    closeBtn?.addEventListener('click', closeModal);

    // Fechar ao clicar fora
    modal?.addEventListener('click', (e) => {
      if (e.target === modal) {
        closeModal();
      }
    });

    // Fechar com ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal?.classList.contains('active')) {
        closeModal();
      }
    });
  }
</script>
